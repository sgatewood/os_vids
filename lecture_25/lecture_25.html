<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="../styles.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30="crossorigin="anonymous"></script>
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
	<script src="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.js"></script>
	<script type="text/javascript" src="../script.js"></script>
</head>
<body>
	<h1 id='name'>Virtual Machines</h1>
	<div class="vid" tab="0" done="true">
		<h1>Intro / Flashback (05:12)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=00:00:00,05:12' duration='312' style='display: none;'></div>
	</div> <!-- vid -->
	<div class="vid" tab="0" done="true">
		<h1>Virtual Machines (03:24)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=05:12,08:36' duration='204' style='display: none;'></div>
		<div class='notes-container'>
		<div class='notes'>
<h1>Virtual Machines</h1>
<ul>
<li><strong>System</strong> Virtual Machines</li>
<li>Goal: <strong>Imitate hardware</strong></li>
<li>What hardware?<ul>
<li>Whatever's easiest</li>
</ul>
</li>
<li>Running <strong>Operating Systems</strong></li>
<li>Terms<ul>
<li><strong>Hypervisor</strong> (or "VM Monitor")<ul>
<li>e.g. Virtualbox</li>
<li>Sometimes a part of host OS</li>
</ul>
</li>
<li><strong>Guest OS</strong><ul>
<li>e.g Linux</li>
<li>Application for the Hypervisor</li>
</ul>
</li>
<li><strong>Host OS</strong><ul>
<li>e.g. Windows</li>
<li>Sometimes Host OS = Hypervisor</li>
</ul>
</li>
</ul>
</li>
<li>We'll assume Hypervisor = Host OS<ul>
<li>e.g. Hypervisor will have exception handlers</li>
</ul>
</li>
</ul>
<p><a href="notes2.md">Next</a></p>
		</div>
		</div>
	</div> <!-- vid -->
	<div class="vid" tab="1" done="true">
		<h1>Imitate: How close? (02:08)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=08:36,10:44' duration='128' style='display: none;'></div>
		<div class='notes-container'>
		<div class='notes'>
<h1>Imitate: How close?</h1>
<ul>
<li><strong>Full Virtualization</strong><ul>
<li>Guest OS unmodified</li>
</ul>
</li>
<li><strong>Paravirtualization</strong><ul>
<li>Small changes to guest OS</li>
</ul>
</li>
<li>Fuzzy line</li>
</ul>
		</div>
		</div>
	</div> <!-- vid -->
	<div class="vid" tab="1" done="true">
		<h1>Other techniques (01:16)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=10:44,12:00' duration='76' style='display: none;'></div>
		<div class='notes-container'>
		<div class='notes'>
<h1>Other techniques</h1>
<ol>
<li>Extra HW support for VMS</li>
<li>Compile guest OS' machine code to new machine code<ul>
<li>Not as slow as you might think</li>
</ul>
</li>
</ol>
		</div>
		</div>
	</div> <!-- vid -->
	<div class="vid" tab="0" done="false">
		<h1>VM Layering (00:34)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=12:00,12:34' duration='34' style='display: none;'></div>
		<div class='notes-container'>
		<div class='notes'>
<h1>VM Layering</h1>
<ul>
<li>Run <strong>Hypervisor</strong> in <strong>Kernel</strong> mode</li>
<li>Run <strong>Guest OS</strong> in <strong>User</strong> mode<ul>
<li>Can think of Guest OS as Hypervisor's "process"</li>
</ul>
</li>
</ul>
		</div>
		</div>
	</div> <!-- vid -->
	<div class="vid" tab="1" done="false">
		<h1>Pretend Modes (00:41)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=12:34,13:15' duration='41' style='display: none;'></div>
		<div class='notes-container'>
		<div class='notes'>
<h1>Pretend Modes</h1>
<ul>
<li><strong>Pretend User mode</strong> and <strong>Pretend kernel mode</strong> for guest OS<ul>
<li>Needs to run stuff in Kernel mode</li>
<li>But whole thing in user mode</li>
</ul>
</li>
</ul>
		</div>
		</div>
	</div> <!-- vid -->
	<div class="vid" tab="1" done="false">
		<h1>Keeping track of stuff (01:36)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=13:15,14:51' duration='96' style='display: none;'></div>
		<div class='notes-container'>
		<div class='notes'>
<h1>Keeping Track of stuff</h1>
<ul>
<li>Hypervisor keeps track of regular process stuff<ul>
<li>Some extras tho<ul>
<li>Whether in User/kernel mode</li>
<li>Page table ptr of guest OS (HARD)</li>
<li>Exception table ptr</li>
<li>Whether interrupts are disabled<ul>
<li>(whether we're pretending they are or not)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Guest OS runs like a process, with extra state to keep track of</li>
</ul>
		</div>
		</div>
	</div> <!-- vid -->
	<div class="vid" tab="1" done="false">
		<h1>Basic Hypervisor Flow (02:32)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=14:51,17:23' duration='152' style='display: none;'></div>
		<div class='notes-container'>
		<div class='notes'>
<h1>How do we make it look like it's on real HW?</h1>
<ul>
<li>Run it normally until it stops (exceptions)</li>
<li>Hypervisor simulates what processor would "normally" do<ul>
<li>e.g. Screen system call: talks to screen on your behalf</li>
<li>e.g. fault to disable interrupts: Store that you disabled interrupts</li>
<li>e.g. System call: Run Guest OS' system call handler</li>
</ul>
</li>
</ul>
		</div>
		</div>
	</div> <!-- vid -->
	<div class="vid" tab="0" done="false">
		<h1>Virtual machine execution pieces (00:50)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=17:23,18:13' duration='50' style='display: none;'></div>
	</div> <!-- vid -->
	<div class="vid" tab="0" done="false">
		<h1>Trap and Emulate (14:28)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=18:13,32:41' duration='868' style='display: none;'></div>
	</div> <!-- vid -->
	<div class="vid" tab="0" done="false">
		<h1>The rest... (42:49)</h1>
		<h2 class='go-back'>Go Back</h2>
		<div class='vid-placeholder' url='https://www.cs.virginia.edu/~cr4bd/4414/F2019/recordings/20191203-video-and-audio.webm#t=32:41,01:15:30' duration='2569' style='display: none;'></div>
	</div> <!-- vid -->
</body>
</html>
